<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>HTTP Client</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:20px;background:#f7f7f7;color:#222}
    #log{height:300px;overflow:auto;background:#111;color:#e5e5e5;padding:10px;border-radius:6px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;white-space:pre-wrap}
    .row{display:flex;gap:8px;margin:10px 0}
    input,button{padding:8px;border-radius:6px;border:1px solid #ccc}
    button{background:#2563eb;color:#fff;border-color:#1d4ed8;cursor:pointer}
  </style>
</head>
<body>
  <h3>HTTP Request/Response Client</h3>
  <div class="row">
    <button id="fast">GET /fast</button>
    <button id="slow">GET /slow</button>
    <label>Repeat <input id="repeat" type="number" value="1" min="1" style="width:60px"/> times</label>
  </div>
  <div id="log"></div>

  <script>
    const base = 'http://localhost:4300';
    const logEl = document.getElementById('log');
    const btnFast = document.getElementById('fast');
    const btnSlow = document.getElementById('slow');
    const repeatEl = document.getElementById('repeat');

    function log(line){
      const at = new Date().toLocaleTimeString();
      logEl.textContent += `[${at}] ${line}\n`;
      logEl.scrollTop = logEl.scrollHeight;
    }

    async function call(path){
      const url = base + path;
      const n = Math.max(1, Number(repeatEl.value||1));
      for (let i=0;i<n;i++){
        const t0 = performance.now();
        try{
          const res = await fetch(url);
          const t1 = performance.now();
          const ms = (t1 - t0).toFixed(2);
          const text = await res.text();
          log(`${res.status} ${path} in ${ms}ms -> ${text}`);
        }catch(e){
          log(`ERROR ${path}: ${e}`);
        }
      }
    }

    btnFast.onclick = () => call('/fast');
    btnSlow.onclick = () => call('/slow');
  </script>
</body>
</html>
